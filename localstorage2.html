<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTAC VCE301 Student Logbook</title>

    <style>
        body {
            font-family: Figtree, sans-serif;
            text-align: center;
            margin: 20px;
        }

        .sidebar {
            position: fixed;
            top: 10px;
            right: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .sidebar button {
            padding: 10px;
            cursor: pointer;
            background: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
        }

        .container {
            max-width: 800px;
            margin: 20px;
        }

        .investigation {
            margin-bottom: 50px;
        }

        .image-container {
            max-width: 80%;
            height: auto;
            margin-top: 20px;
        }

        textarea {
            width: 100%;
            height: 100px;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }

        td[contenteditable="true"] {
            background-color: #eaf7ff;
        }
    </style>
</head>

<body>
    <div class="sidebar">
        <!-- 
            We add an id to the logo image so we can detect triple-click events.
            "onclick" can be replaced with an eventListener in JavaScript. 
            Here we will keep inline for simplicity, but we will set up the logic in the script.
        -->
        <img
          src="https://gtac.edu.au/wp-content/themes/gtac/assets/images/logo-2024.png"
          id="logoImage"
          style="width: 40%; opacity: 0.5;"
        />
        <button onclick="scrollToSection('investigation1')">Investigation 1</button>
        <button onclick="scrollToSection('investigation2')">Investigation 2</button>
        <button onclick="scrollToSection('investigation3')">Investigation 3</button>
        <button onclick="printPageAsPDF()">Save as PDF</button>
    </div>

    <div class="container">
        <h1 style="text-align: center;">Applying Biotechnologies to Produce Human Insulin at GTAC</h1>

        <h2>Enter Your Names:</h2>
        <textarea id="experiment1" placeholder="Type your names here"></textarea>

        <img 
            src="https://cdn.glitch.global/bedc10a6-54ca-4681-bce3-e9149cb53de3/recombinantplasmid?v=1738712387414" 
            alt="Process of transforming bacteria with recombinant plasmid" 
            style="width:100%;"
        >

        <div id="investigation1" class="investigation activeSection">
            <h2>Investigation 1: Plasmid Diagnostics</h2>
            <h3>Learning intention: To analyse restriction digest results using DNA gel electrophoresis.</h3>
            <img 
                src="https://cdn.glitch.global/bedc10a6-54ca-4681-bce3-e9149cb53de3/orivsrecombinantplasmidmap?v=1738715311314" 
                alt="Plasmid map comparison" 
                style="width:100%;"
            >
            <h4>Identify 4 differences between the Original and the Recombinant Plasmid Maps</h4>
            <textarea 
                id="experiment2" 
                placeholder="List 4 differences as you compare the Original and the Recombinant Plasmid Maps"
            ></textarea>

            <h2>Results: Modelling Double digest on plasmids</h2>
            <table>
                <tr>
                    <th></th>
                    <th colspan="2">Original Plasmid (4641 bp)</th>
                    <th colspan="2">Recombinant Plasmid (5428 bp)</th>
                </tr>
                <tr>
                    <td>Enzyme pair used for digest:</td>
                    <td>Number of fragments</td>
                    <td>Sizes of fragments (bp)</td>
                    <td>Number of fragments</td>
                    <td>Sizes of fragments (bp)</td>
                </tr>
                <tr>
                    <td>
                        EcoRV
                        <div>NheI</div>
                    </td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                </tr>
                <tr>
                    <td>
                        EcoRV
                        <div>XhoI</div>
                    </td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                </tr>
                <tr>
                    <td>
                        NheI
                        <div>SmaI</div>
                    </td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                    <td contenteditable="true"></td>
                </tr>
            </table>
            <p>Ignore fragments if they are less than 30 bp â€“ they cannot be detected experimentally.</p>

            <h2>Modelling: Gel Electrophoresis</h2>
            <h4 style="color:#ff6d3a;">Insert picture of your predicted gel electrophoresis results</h4>
            <input 
                type="file" 
                accept="image/*" 
                onchange="addUploadedImage(event, 'imageContainer1')"
            >
            <div id="imageContainer1" class="image-container"></div>

            <h3 style="color:#ff6d3a;">Summarise what is occurring during Gel Electrophoresis</h3>
            <textarea 
                id="experiment3" 
                placeholder="Type your summary of gel electrophoresis here"
            ></textarea>
        </div>

        <h2>Results: Gel Electrophoresis</h2>
        <img 
            src="https://cdn.glitch.global/fcc4e6ca-0f57-4233-b69a-10230c4b69f6/eGelloadedlanes?v=1738890443008" 
            alt="Egel Lanes" 
            style="width:80%;"
        >

        <h4 style="color:#ff6d3a;">Insert picture of the gel electrophoresis results</h4>
        <input 
            type="file" 
            accept="image/*" 
            onchange="addUploadedImage(event, 'imageContainer2')"
        >
        <div id="imageContainer2" class="image-container"></div>

        <h2>Analysis: DNA Gel Electrophoresis results</h2>
        <h4>
            Identify the tube that contains the recombinant plasmids (Tube 1 or Tube 2?).
            <div>Justify your answer.</div>
        </h4>
        <textarea 
            id="experiment4" 
            placeholder="Type your answer here"
        ></textarea>

        <div id="investigation2" class="investigation">
            <h2>Investigation 2: Bacterial Transformation</h2>
            <h3>Learning intention: To refine a lab protocol to transform bacteria with recombinant plasmids.</h3>
            <div class="image-container">
                <img 
                    src="https://cdn.glitch.global/bedc10a6-54ca-4681-bce3-e9149cb53de3/Investigation2?v=1738727664648" 
                    alt="Example Image"
                >
                <img 
                    src="https://cdn.glitch.global/fcc4e6ca-0f57-4233-b69f-10230c4b69f6/investigation2protocol?v=1738817484920" 
                    alt="Transformation Protocol"
                >
            </div>

            <h3>Method:</h3>
            <h3 style="color:#ff6d3a;">Step 1: Making bacteria competent</h3>
            <img 
                src="https://cdn.glitch.global/bedc10a6-54ca-4681-bce3-e9149cb53de3/competentbacteria?v=1738724782056" 
                alt="Using Calcium Chloride to make bacteria competent" 
                style="width:100%;"
            >
            <img 
                src="https://cdn.glitch.global/bedc10a6-54ca-4681-bce3-e9149cb53de3/Cacl2%20conc%20graph.png?v=1738719272040" 
                alt="Calcium Chloride graph" 
                style="width:100%;"
            >
            <h5>Use this data to decide the Calcium Chloride concentration that you will use with your bacteria.</h5>
            <textarea 
                id="experiment5" 
                placeholder="Select the concentration of Calcium Chloride here. Describe why we use Calcium Chloride."
            ></textarea>

            <h3 style="color:#ff6d3a;">Step 2: Heat Shock</h3>
            <img 
                src="https://cdn.glitch.global/bedc10a6-54ca-4681-bce3-e9149cb53de3/heatshock.png?v=1738726774760" 
                alt="Heat Shock" 
                style="width:100%;"
            >
            <h4>Select the temperature and time for heat shock using the provided data.</h4>
            <textarea 
                id="experiment6" 
                placeholder="Type your selected conditions for heat shock here"
            ></textarea>
            <div>
                <h5>What is the purpose of heat shock?</h5>
            </div>
            <textarea 
                id="experiment7" 
                placeholder="Type the purpose of heat shock here"
            ></textarea>

            <h3 style="color:#ff6d3a;">Step 3: Recovery</h3>
            <h4>Use the data to determine the recovery time for your transformation protocol.</h4>
            <img 
                src="https://cdn.glitch.global/fcc4e6ca-0f57-4233-b69f-10230c4b69f6/recoverytime?v=1738795693224" 
                alt="Recovery Time graph" 
                style="width:100%;"
            >
            <textarea 
                id="experiment8" 
                placeholder="Insert recovery time here"
            ></textarea>
        </div>

        <div id="investigation3" class="investigation">
            <h2>Investigation 3: Selecting for Transformed Bacteria</h2>
            <h3>Learning intention: To justify my selection of transformed bacteria for use in insulin production.</h3>
            <img 
                src="https://cdn.glitch.global/fcc4e6ca-0f57-4233-b69f-10230c4b69f6/Investigation3Aim?v=1738817153606" 
                alt="Investigation3Aim" 
                style="width:100%;"
            >

            <div>
                <h5>Describe the purpose of GFP and a limitation of using it in bacterial transformation.</h5>
            </div>
            <textarea 
                id="experiment9" 
                placeholder="Type your response here"
            ></textarea>

            <div>
                <h4>Hypothesis: How will you know that you have selected transformed bacteria?</h4>
            </div>
            <textarea 
                id="experiment10" 
                placeholder="It is expected that..."
            ></textarea>

            <h4>Modelling Activity: What is happening on each growth medium?</h4>
            <h5>Insert an image of your completed modelling activity here</h5>
            <input 
                type="file" 
                accept="image/*" 
                onchange="addUploadedImage(event, 'imageContainer3')"
            >
            <div id="imageContainer3" class="image-container"></div>
            <h5>
                Using the model, summarise the purpose of the ingredients added to the growth media
                (LB, Ampicillin, and Arabinose)
            </h5>
            <textarea 
                id="experiment11" 
                placeholder="Record the purpose of the ingredients in the growth media (LB, Ampicillin and arabinose sugar)"
            ></textarea>

            <h4>Results: Fluorescence microscopy</h4>
            <h5>Insert an image of your bacteria viewed through the Fluorescent microscope (EVOS)</h5>
            <input 
                type="file" 
                accept="image/*" 
                onchange="addUploadedImage(event, 'imageContainer4')"
            >
            <div id="imageContainer4" class="image-container"></div>

            <h5>Insert an image of the sample answers to compare and discuss</h5>
            <input 
                type="file" 
                accept="image/*" 
                onchange="addUploadedImage(event, 'imageContainer5')"
            >
            <div id="imageContainer5" class="image-container"></div>

            <h3>Discussion:</h3>
            <h5>Consider the following questions:</h5>
            <p style="text-align:left">
                1. What is the purpose of transforming bacteria?
                <br>
                2. What are some possible explanations for differences between the results you might see back at school?
                </br>
                <br>
                i.e. Limitations and errors?
                </br>
            </p>
            <textarea 
                id="experiment12" 
                placeholder="Type your response here"
            ></textarea>

            <h3>Conclusion (back at school):</h3>
            <textarea 
                id="experiment13" 
                placeholder="Write your conclusions here"
            ></textarea>
        </div>
    </div>

    <script>
        // ------------------------------------------------------------------------
        // Scroll to Section Function
        // ------------------------------------------------------------------------
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }

        // ------------------------------------------------------------------------
        // Add Uploaded Image Function
        // ------------------------------------------------------------------------
        function addUploadedImage(event, containerId) {
            const container = document.getElementById(containerId);
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const image = document.createElement("img");
                    image.src = e.target.result;
                    image.style.maxWidth = "100%";
                    container.innerHTML = "";
                    container.appendChild(image);
                };
                reader.readAsDataURL(file);
            }
        }

        // ------------------------------------------------------------------------
        // Print Page as PDF
        // ------------------------------------------------------------------------
        function printPageAsPDF() {
            window.print();
        }

        // ------------------------------------------------------------------------
        // Save and Restore (Session and Local Storage)
        // ------------------------------------------------------------------------
        document.addEventListener("DOMContentLoaded", function() {
            // Restore text areas from Session Storage on page load
            document.querySelectorAll("textarea").forEach(textarea => {
                const savedText = sessionStorage.getItem(textarea.id);
                if (savedText !== null) {
                    textarea.value = savedText;
                }
                // Save changes to both Session Storage and Local Storage
                textarea.addEventListener("input", () => {
                    sessionStorage.setItem(textarea.id, textarea.value);
                    localStorage.setItem(textarea.id, textarea.value);
                });
            });

            // Restore editable table cells from Session Storage on page load
            const editableCells = document.querySelectorAll("td[contenteditable=true]");
            editableCells.forEach((cell, index) => {
                const savedCellText = sessionStorage.getItem(`cell-${index}`);
                if (savedCellText !== null) {
                    cell.innerText = savedCellText;
                }
                // Save changes to both Session Storage and Local Storage
                cell.addEventListener("input", () => {
                    sessionStorage.setItem(`cell-${index}`, cell.innerText);
                    localStorage.setItem(`cell-${index}`, cell.innerText);
                });
            });

            // Restore the uploaded image from Session Storage if desired (not strictly required, but included here)
            const uploadedImage = document.getElementById("uploadedImage");
            if (uploadedImage) {
                const savedImageData = sessionStorage.getItem("uploadedImage");
                if (savedImageData) {
                    uploadedImage.src = savedImageData;
                    uploadedImage.style.display = "block";
                }
            }
        });

        // ------------------------------------------------------------------------
        // Triple Click Detection for Logo
        // ------------------------------------------------------------------------
        let clickCount = 0;
        let firstClickTime = 0;

        document.getElementById("logoImage").addEventListener("click", detectTripleClick);

        function detectTripleClick() {
            const currentTime = new Date().getTime();
            
            // If no clicks yet, initialize
            if (clickCount === 0) {
                clickCount = 1;
                firstClickTime = currentTime;
            } else {
                // If current time is still within 1 second of the first click
                if (currentTime - firstClickTime <= 1000) {
                    clickCount++;
                    // If we reach 3 clicks within 1 second, prompt for password
                    if (clickCount === 3) {
                        promptForPassword();
                        // Reset click counter and time
                        clickCount = 0;
                        firstClickTime = 0;
                    }
                } else {
                    // More than 1 second has passed since the first click,
                    // so reset and start over
                    clickCount = 1;
                    firstClickTime = currentTime;
                }
            }
        }

        // ------------------------------------------------------------------------
        // Prompt for Password
        // ------------------------------------------------------------------------
        function promptForPassword() {
            const userPassword = prompt("Please enter the password:");
            if (userPassword === "abc") {
                restoreLocalStorageData();
            }
        }

        // ------------------------------------------------------------------------
        // Restore from Local Storage
        // ------------------------------------------------------------------------
        function restoreLocalStorageData() {
            // Restore text areas from Local Storage
            document.querySelectorAll("textarea").forEach(textarea => {
                const localStorageValue = localStorage.getItem(textarea.id);
                if (localStorageValue !== null) {
                    textarea.value = localStorageValue;
                }
            });

            // Restore table cells from Local Storage
            document.querySelectorAll("td[contenteditable=true]").forEach((cell, index) => {
                const localStorageCellText = localStorage.getItem(`cell-${index}`);
                if (localStorageCellText !== null) {
                    cell.innerText = localStorageCellText;
                }
            });
        }
    </script>
</body>
</html>
